Also it looks like you simply want to compute the extreme values of your function. I would think that mathlab is your friend. This is a mathematical problem, not a combinatorial one.<div class="quote" style="line-height: 1.5"><br><br>-------- Originalnachricht --------<br>Betreff: Re: [Potassco-users] Very Large Domain<br>Von: Roland Kaminski <kam...@cs...><br>An: pot...@li...<br>Cc: <br><br><br type="attribution"><blockquote class="quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">clingcon is a solver for linear constraints. If your problem cannot be <br>expressed using such constraints, then you could maybe use another constraint <br>solver. Maybe gecode? -R<br><br>https://www.gecode.org/<br><br>On Sunday, December 13, 2020 12:36:20 AM CET John wrote:<br>> So just to be clear, this type of problem below cannot be solved in Clingo<br>> or Clingcon now or probably ever. Is this a limitation of ASP in general?<br>> If so, how would you go about solving this type of problem?<br>> <br>> % Given a selection of ship parts (i.e. weapons, amor, thrusters), solves<br>> for<br>> % the optimal quantity of each part that maximizes efficiency of the vessel<br>> % according to an arbitrary formula.<br>> <br>> #include <csp>.<br>> <br>> #const weapon_mass = 20.<br>> #const armor_mass = 10.<br>> #const thruster_mass = 100.<br>> <br>> #const weapon_cost = 5.<br>> #const armor_cost = 2.<br>> #const thruster_cost = 10.<br>> <br>> #const weapon_power = 20.<br>> #const armor_durability = 10.<br>> #const thruster_thrust = 4000.<br>> <br>> &dom { 0..10000 } = armor.<br>> &dom { 0..10000 } = weapon.<br>> &dom { 0..10000 } = thruster.<br>> &dom { 0..1000000 } = mass.<br>> &dom { 0..1000000 } = cost.<br>> &dom { 0..1000000 } = attack.<br>> &dom { 0..1000000 } = defense.<br>> &dom { 0..1000000 } = speed.<br>> &dom { 0..1000000 } = efficiency.<br>> <br>> &sum { armor * armor_mass;<br>>        weapon * weapon_cost;<br>>        thruster * thruster_mass } = mass.<br>> <br>> &sum { armor * armor_cost;<br>>        weapon * weapon_cost;<br>>        thruster * thruster_cost } = cost.<br>> <br>> &sum { weapon * weapon_power } = attack.<br>> &sum { armor * armor_durability } = defense.<br>> &sum { thruster * thruster_thrust / mass } = speed.<br>> &sum { attack * defense * speed**2 / cost**2 } = efficiency.<br>> <br>> &maximize { efficiency }.<br>> <br>> <br>> On Sat, Dec 12, 2020 at 4:59 PM Roland Kaminski <kam...@cs...><br>> wrote:<br>> > There are two problems here. First, `a / b = x`  is not a clingcon<br>> > constraints. I believe the grounder in the old clingcon version simply<br>> > makes<br>> > it false and in turn the program becomes unsatisfiable. You would have to<br>> > write<br>> > it as `&sum {a / b} = x` but I am not sure if clingcon 3 supports<br>> > non-linear<br>> > constraints; clingcon 5 does not (and probably never will). Second, the<br>> > variable `x` is unbounded and thus has by default the full integer domain.<br>> > I<br>> > believe clingcon 3 always translates minimize constraints. In this case,<br>> > the<br>> > translation is so huge that the system runs out of memory or exhausts the<br>> > available literals at some point. Of course Max is the author of clingcon<br>> > 3<br>> > and knows most about the system. Maybe he can comment more. -R<br>> > <br>> > On Saturday, December 12, 2020 10:47:37 PM CET John wrote:<br>> > > (My last message appears to have gone to Roland directly instead of to<br>> > <br>> > the<br>> > <br>> > > mailing list)<br>> > > <br>> > > I played with this code some more and I think it's a bug with the<br>> > > optimization statement. For example, the following code hangs and<br>> > > eventually fails with an unknown error:<br>> > > <br>> > > #include <csp>.<br>> > > <br>> > > &dom { 0..10 } = a.<br>> > > &dom { 0..10 } = b.<br>> > > <br>> > > a / b = x.<br>> > > <br>> > > &minimize { 0 - x }.<br>> > > <br>> > > <br>> > > However, if you remove the optimization statement, it completes<br>> > <br>> > immediately<br>> > <br>> > > as SATISFIABLE. I'll file a bug report on GitHub.<br>> > > <br>> > > On Fri, Dec 11, 2020 at 9:09 PM John <joh...@mc...> wrote:<br>> > > > Thank you. I found these older PDFs to gain a basic understanding, and<br>> > > > used the example code in later versions to deduce the proper syntax.<br>> > > > <br>> > > > https://sourceforge.net/projects/potassco/files/clingcon/<br>> > > > https://www.cs.uni-potsdam.de/~torsten/hybris.pdf<br>> > > > <br>> > > > <br>> > > > I was able to run your Clingcon code with minor modification and it<br>> > <br>> > worked<br>> > <br>> > > > great, but I tried to apply it to the larger problem and it crashes.<br>> > <br>> > Here<br>> > <br>> > > > is a slightly more complex model to demonstrate:<br>> > > > <br>> > > > #include <csp>.<br>> > > > <br>> > > > #const armor_mass = 10.<br>> > > > #const reactor_mass = 50.<br>> > > > #const thruster_mass = 100.<br>> > > > #const shield_mass = 40.<br>> > > > <br>> > > > &dom { 0..100 } = armor.<br>> > > > &dom { 0..100 } = reactor.<br>> > > > &dom { 0..100 } = thruster.<br>> > > > &dom { 0..100 } = shield.<br>> > > > <br>> > > > &sum { armor * armor_mass;<br>> > > > <br>> > > >         reactor * reactor_mass;<br>> > > >         thruster * thruster_mass;<br>> > > >         shield * shield_mass } = mass.<br>> > > > <br>> > > > thruster / mass = thrustPerMass.<br>> > > > <br>> > > > &minimize { 0 - thrustPerMass }.  % Version 3.3.0 thinks "&maximize"<br>> > <br>> > is a<br>> > <br>> > > > theory atom<br>> > > > <br>> > > > <br>> > > > It runs for 5-30 seconds, and appears to run out of memory.<br>> > > > <br>> > > > clingcon version 3.3.0<br>> > > > Reading from ...mes\Istrolid\Battleship Solver\test.lp<br>> > > > C:\Users\Mark\Google Drive\Other Hobbies\Games\Istrolid\Battleship<br>> > > > Solver\test.lp:18:1-16: info: operation undefined: (thruster/mass)<br>> > > > <br>> > > > *** ERROR: (clingcon): std::bad_alloc<br>> > > > UNKNOWN<br>> > > > <br>> > > > Models       : 0+<br>> > > > Calls        : 1<br>> > > > Time         : 7.961s (Solving: 0.00s 1st Model: 0.00s Unsat: 0.00s)<br>> > > > CPU Time     : 5.281s<br>> > > > <br>> > > > <br>> > > > On a side note, I couldn't find the correct syntax for #min{}.<br>> > <br>> > Replacing<br>> > <br>> > > > line 20 with this gives me UNSATISFIABLE.<br>> > > > <br>> > > > #min { thruster : thruster; reactor : reactor } = thrust.<br>> > > > thrust / mass = thrustPerMass.<br>> > > > <br>> > > > <br>> > > > On Fri, Dec 11, 2020 at 6:55 PM Roland Kaminski <<br>> > > > <br>> > > > kam...@cs...> wrote:<br>> > > >> We do not have any documentation available but the constraints are<br>> > <br>> > very<br>> > <br>> > > >> similar to the ones in the older version. Also have a look at the<br>> > > >> examples<br>> > > >> [1]. All constraints (except the minimize constraint) are used in the<br>> > > >> examples. -R<br>> > > >> <br>> > > >> [1]: https://github.com/potassco/clingcon/tree/master/examples<br>> > > >> <br>> > > >> On Saturday, December 12, 2020 1:27:45 AM CET John wrote:<br>> > > >> > Thank you all for your help. I'm trying the Clingcon solution at<br>> > > >> > the<br>> > > >> > moment. I noticed you used version 5.0.0 in your example. It has a<br>> > <br>> > very<br>> > <br>> > > >> > different syntax than the 3.3.0 that I'm using. Is there<br>> > <br>> > documentation<br>> > <br>> > > >> for<br>> > > >> <br>> > > >> > that version I can read to learn it?<br>> > > >> > <br>> > > >> > On Fri, Dec 11, 2020 at 2:38 AM MaxOstrowski <<br>> > > >> <br>> > > >> ost...@cs...><br>> > > >> <br>> > > >> > wrote:<br>> > > >> > > Also notice the difference in the encodings.<br>> > > >> > > <br>> > > >> > > Your version creates a predicate ship with 100*100*100*100 =<br>> > > >> <br>> > > >> 100.000.000<br>> > > >> <br>> > > >> > > instantiations,<br>> > > >> > > and then choses 1 of it.<br>> > > >> > > Roland creates 4 different predicates with a size of 100 each,<br>> > > >> > > 100+100+100+100 = 400 instantiations.<br>> > > >> > > The combinatorics is created during search as they can be freely<br>> > > >> <br>> > > >> combined.<br>> > > >> <br>> > > >> > > You may call clingo with the option "--text" on both encodings to<br>> > <br>> > see<br>> > <br>> > > >> the<br>> > > >> <br>> > > >> > > "ground" version of it.<br>> > > >> > > This grounding always happens before solving can take place.<br>> > > >> > > <br>> > > >> > > Hope this helps a bit,<br>> > > >> > > Max<br>> > > >> > > Am 11.12.20 um 01:23 schrieb Roland Kaminski:<br>> > > >> > > <br>> > > >> > > And btw. the numbers in your example are still in the range of<br>> > <br>> > what<br>> > <br>> > > >> can be<br>> > > >> <br>> > > >> > > handled with ASP but one has to be careful when modeling this.<br>> > > >> > > You<br>> > > >> > > can<br>> > > >> > > have a look at the encoding below. The maximize constraint can be<br>> > > >> <br>> > > >> encoded<br>> > > >> <br>> > > >> > > much better but better keep it simple for now. -R<br>> > > >> > > <br>> > > >> > > 1 {  armor(1..100) } 1.<br>> > > >> > > 1 {  reactor(1..100) } 1.<br>> > > >> > > <br>> > > >> > > #maximize { X,armor: armor(X); X,reactor: reactor(X) }.<br>> > > >> > > <br>> > > >> > > On Friday, December 11, 2020 1:10:15 AM CET Roland Kaminski<br>> > > >> > > wrote:<br>> > > >> > > <br>> > > >> > > This looks like something for clingcon, on ILP, or even an LP<br>> > <br>> > solver<br>> > <br>> > > >> (if<br>> > > >> <br>> > > >> > > real valued solutions are acceptable). Have a look at a possible<br>> > > >> <br>> > > >> clingcon<br>> > > >> <br>> > > >> > > encoding below. -R<br>> > > >> > > <br>> > > >> > > #const armor_mass = 2.<br>> > > >> > > #const reactor_mass = 50.<br>> > > >> > > #const thruster_mass = 100.<br>> > > >> > > #const shield_mass = 5.<br>> > > >> > > <br>> > > >> > > &dom { 0..100 } = armor.<br>> > > >> > > &dom { 0..100 } = reactor.<br>> > > >> > > &dom { 0..100 } = thruster.<br>> > > >> > > &dom { 0..100 } = shield.<br>> > > >> > > <br>> > > >> > > &sum { armor * armor_mass;<br>> > > >> > > <br>> > > >> > >        reactor * reactor_mass;<br>> > > >> > >        thruster * thruster_mass;<br>> > > >> > >        shield * shield_mass } = mass.<br>> > > >> > > <br>> > > >> > > &maximize { mass }.<br>> > > >> > > <br>> > > >> > > $ clingcon spaceship.lp 0<br>> > > >> > > clingcon version 5.0.0<br>> > > >> > > Reading from test.lp<br>> > > >> > > Solving...<br>> > > >> > > ...<br>> > > >> > > Answer: 419<br>> > > >> > > <br>> > > >> > > Assignment:<br>> > > >> > > armor=100 mass=15700 reactor=100 shield=100 thruster=100<br>> > > >> > > Cost: -15700<br>> > > >> > > SATISFIABLE<br>> > > >> > > <br>> > > >> > > Models       : 419<br>> > > >> > > Calls        : 1<br>> > <br>> > > >> > > Time         : 0.030s (Solving: 0.03s 1st Model: 0.00s Unsat:<br>> > 0.00s)<br>> > <br>> > > >> > > CPU Time     : 0.030s<br>> > > >> > > <br>> > > >> > > -R<br>> > > >> > > <br>> > > >> > > On Thursday, December 10, 2020 11:56:54 PM CET John wrote:<br>> > > >> > > <br>> > > >> > > Hello,<br>> > > >> > > <br>> > > >> > > I have a problem with a very large domain. I've simplified it to<br>> > <br>> > the<br>> > <br>> > > >> > > following example:<br>> > > >> > > <br>> > > >> > > % Given four different ship components: armor, reactors,<br>> > <br>> > thrusters,<br>> > <br>> > > >> and<br>> > > >> <br>> > > >> > > shields.<br>> > > >> > > % Design a ship that has an optimal number of each component to<br>> > > >> <br>> > > >> satisfy<br>> > > >> <br>> > > >> > > certain criteria.<br>> > > >> > > % In this example, for simplicity, we are maximizing the mass of<br>> > <br>> > the<br>> > <br>> > > >> ship,<br>> > > >> <br>> > > >> > > % but we could be optimizing for anything, such as (speed * armor<br>> > <br>> > /<br>> > <br>> > > >> cost).<br>> > > >> <br>> > > >> > > #const armor_mass = 2.<br>> > > >> > > #const reactor_mass = 50.<br>> > > >> > > #const thruster_mass = 100.<br>> > > >> > > #const shield_mass = 5.<br>> > > >> > > <br>> > > >> > > { ship(0..100, 0..100, 0..100, 0..100) } = 1.<br>> > > >> > > <br>> > > >> > > mass(M) :-<br>> > > >> > > <br>> > > >> > >     ship(ArmorThickness,<br>> > > >> > >     <br>> > > >> > >         ReactorCount,<br>> > > >> > >         ThrusterCount,<br>> > > >> > >         ShieldEmitterCount),<br>> > > >> > >     <br>> > > >> > >     M = armor_mass * ArmorThickness +<br>> > > >> > >     <br>> > > >> > >         reactor_mass * ReactorCount +<br>> > > >> > >         thruster_mass * ThrusterCount +<br>> > > >> > >         shield_mass * ShieldEmitterCount.<br>> > > >> > > <br>> > > >> > > #show ship/4.<br>> > > >> > > #maximize { M @1 : mass(M) }<br>> > > >> > > <br>> > > >> > > <br>> > > >> > > Obviously, line 6 by itself overloads the grounder. I can only<br>> > <br>> > shrink<br>> > <br>> > > >> the<br>> > > >> <br>> > > >> > > domain boundaries so much without excluding possible optimal<br>> > <br>> > values.<br>> > <br>> > > >> In<br>> > > >> <br>> > > >> > > this problem, there are only 4 components, but there could be 20<br>> > <br>> > or<br>> > <br>> > > >> more<br>> > > >> <br>> > > >> > > in<br>> > > >> > > the final problem.<br>> > > >> > > <br>> > > >> > > I tried to think of ways to use incremental mode to increase the<br>> > > >> <br>> > > >> domain in<br>> > > >> <br>> > > >> > > steps, but I'm not sure how that would look if it's even<br>> > <br>> > practical.<br>> > <br>> > > >> > > Can this be solved with Clingo or Clingcon at all? Perhaps<br>> > <br>> > gradient<br>> > <br>> > > >> > > descent<br>> > > >> > > would be a better tool in this example; however, if this was a<br>> > <br>> > pure<br>> > <br>> > > >> SAT<br>> > > >> <br>> > > >> > > problem, can it reduced to something simpler, or be incrementally<br>> > > >> > > grounded?<br>> > > >> > > <br>> > > >> > > <br>> > > >> > > <br>> > > >> > > _______________________________________________<br>> > > >> > > Potassco-users mailing<br>> > > >> > > lis...@li...https://<br>> > > >> <br>> > > >> lists.sourceforge.net/lis<br>> > > >> <br>> > > >> > > ts/listinfo/potassco-users<br>> > > >> > > <br>> > > >> > > _______________________________________________<br>> > > >> > > Potassco-users mailing list<br>> > > >> > > Pot...@li...<br>> > > >> > > https://lists.sourceforge.net/lists/listinfo/potassco-users<br><br><br><br>_______________________________________________<br>Potassco-users mailing list<br>Pot...@li...<br>https://lists.sourceforge.net/lists/listinfo/potassco-users<br></blockquote></div>
